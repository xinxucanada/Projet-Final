{% extends "layout.html" %}
{% block title %}
Histoire des commandes
{% endblock %}
{% block content %}
<div class="w">

       
    <div class="commandes ">
        {% for commande in commandes %}
        <div class="commande" id="c{{ commande.4 }}">
            <div class="commande_resume">
                <ul>
                    <li>Date commande: {{ commande.0}}</li>
                    <li>Adresse: {{ commande.1 }}</li>
                    <li>Montant total: {{ commande.2 }}$</li>
                </ul>
                <h3><a href="/commande/{{ commande.4 }}/recommande/">Acheter de nouveau</a></h3>
            </div>
            <div class="commande_detail">
                {{ commande.5 }}
                <table style="text-align: right;">
                    <tr>
                        <td>Produit</td>
                        <td>Prix</td>
                        <td>Quantite</td>
                    </tr>
                    <tbody>
                    {% for ligne in commande.3 %}
                    <tr>
                        <td>{{ ligne.produit }}</td>
                        <td>{{ ligne.prixUnitair }}$</td>
                        <td>{{ ligne.quantite }}</td>
                    </tr>
                    {% endfor %}
                    
                    </tbody >
                </table>
                
            </div>
        </div>
        {% endfor %}
       
    </div>
    <ul class="pagination" style="margin-left: 300px;">
        {{ page_string }}
    </ul>
</div>
<script>
    let commandes = document.querySelectorAll(".commande");
    let btns = document.querySelectorAll("#btn");
    let btnMoins = document.querySelectorAll("#btnMoins");
    
    let tables = document.querySelectorAll("table");
    function affiche_moins () {
        for (let i = 0; i < tables.length; i++) {
        let trs = tables[i].querySelectorAll("tr");
        if (trs.length > 7) {
            for (let j = 7; j < trs.length; j++) {
                trs[j].style.display = "none";
            }
        }
        }
    }
    affiche_moins()

    for (let i = 0; i < commandes.length; i++) {
        btns[i].onclick = function() {
            let trs = tables[i].querySelectorAll("tr");
            let h = trs.length;
            commandes[i].style.height = 190 + (h - 7) * 18 + "px";
            for (let k = 0; k < trs.length; k++) {
                trs[k].style.display = "revert";
            }
        }
        btnMoins[i].onclick = function () {
            commandes[i].style.height = "150px";
            let trs = tables[i].querySelectorAll("tr");
            let h = trs.length;
            for (let k = 7; k < trs.length; k++) {
                trs[k].style.display = "none";
            }
        }
    }


</script>
{% endblock %}